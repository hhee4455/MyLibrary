# 📕 업무 규칙
업무 규칙이란 사업적으로 수익을 창출하거나 비용을 절감할 수 있는 규칙 또는 절차를 의미한다.

예를 들어, 은행이 이자를 부과하는 것도 하나의 업무 규칙이다.  
이 규칙이 컴퓨터에 의해 수행되든, 사람이 수행하든 상관없다.

이러한 규칙을 **핵심 업무 규칙**이라고 부른다.

핵심 업무 규칙은 **데이터**를 필요로 하며, 이를 **핵심 업무 데이터**라고 한다.

핵심 규칙과 핵심 데이터는 본질적으로 결합되어 있기 때문에 객체로 만들기 좋은 후보이며,  
우리는 이러한 객체를 **엔티티**라고 부른다.

---

## 📗 엔티티
**엔티티**는 컴퓨터 시스템 내부에서 동작하는 객체이며,  
핵심 업무 데이터를 기반으로 동작하는 작은 핵심 업무 규칙을 구체화한 것이다.

예를 들어 `Loan` 엔티티는 세 가지 핵심 업무 데이터를 포함하며,  
이와 관련된 세 가지 핵심 업무 규칙을 인터페이스 형태로 제공한다.

<img src="../Clean Architecture-로버트.C 마틴/img/20_1.png" alt="설명" width="400" style="display: block; margin: auto;">

- 이 클래스는 업무를 대표하며, 독립적으로 존재한다.
- 데이터베이스, 사용자 인터페이스, 서드파티 프레임워크에 의해 오염되어서는 안 된다.
- 어떤 시스템에서도 업무를 수행할 수 있어야 한다.

엔티티는 오직 **업무**에만 집중하며, 그 외의 요소는 포함하지 않는다.

엔티티의 유일한 요구사항은 **핵심 업무 데이터와 핵심 업무 규칙을 하나로 묶어**  
별도의 소프트웨어 모듈로 만드는 것이다.

---

## 📗 유스케이스
**유스케이스**는 자동화된 시스템이 어떻게 사용되는지를 설명한다.

엔티티 내부의 **핵심 업무 규칙**과는 달리,  
유스케이스는 **애플리케이션에 특화된 업무 규칙**을 설명한다.

즉, 유스케이스는 엔티티의 규칙을 **어떻게** 그리고 **언제** 호출할지를 명시한다.  
하지만 유스케이스는 엔티티를 제어하지 않는다.

유스케이스만으로는 이 애플리케이션이 웹 기반인지, 콘솔 기반인지 구분할 수 없다.

유스케이스는 시스템이 사용자에게 어떻게 보이는지를 다루지 않으며,  
**사용자와 엔티티 간의 상호작용을 정의**하는 역할을 한다.

엔티티는 자신을 사용하는 유스케이스에 대해 아무것도 알지 못한다.  
이는 **의존성 역전 원칙**에 따라, 의존성의 방향이 상위 계층에서 하위 계층으로 향하지 않기 때문이다.

- **엔티티는 고수준 개념**이며,
- **유스케이스는 저수준 개념**이다.

유스케이스는 단일 애플리케이션에 특화되어 있어 시스템의 입력과 출력에 더 가까운 반면,  
엔티티는 다양한 애플리케이션에서 사용될 수 있도록 일반화되어 있어  
입력과 출력에서 상대적으로 멀리 떨어져 있다.

결론적으로, **유스케이스는 엔티티에 의존하지만**,  
**엔티티는 유스케이스에 의존하지 않는다**.

## 📗 요청 및 응답 모델
제대로 구성된 유스케이스 객체는,  
**데이터가 사용자나 다른 컴포넌트와 어떻게 주고받는지 전혀 알 수 없어야 한다.**

유스케이스는 다음과 같은 방식으로 동작한다:

- **단순한 요청 데이터 구조**를 입력으로 받는다.  
- **단순한 응답 데이터 구조**를 출력으로 반환한다.

이들 데이터 구조는 다음과 같은 특징을 가진다:

- 어떤 외부 요소에도 의존하지 않는다.  
- 표준 프레임워크의 인터페이스로부터 파생되지 않는다.  
- 웹이나 HTTP 등 외부 시스템에 대한 정보도 전혀 알지 못한다.

유스케이스가 엔티티와 데이터 구조를 직접 결합하게 되면, **공통 폐쇄 원칙**과 **단일 책임 원칙**을 위배하게 된다.  
따라서 **유스케이스와 엔티티, 데이터 구조는 분리**되어야 한다.
